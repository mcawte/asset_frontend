(this.webpackJsonpasset_frontend=this.webpackJsonpasset_frontend||[]).push([[0],{54:function(e,t,a){e.exports=a(68)},59:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(59),a(35)),o=a(29),s=a(38),u=a(99),d=a(100),m=new(a(44).w3cwebsocket)("ws://127.0.0.1:8000"),b=function(){m.onopen=function(){console.log("WebSocket Client Connected")};var e=Object(n.useState)({latitude:16.8,longitude:100.4,zoom:1,bearing:0,pitch:0}),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),b=Object(o.a)(c,2),g=b[0],f=b[1],p=Object(n.useState)({id:"",lat:"",lng:""}),E=Object(o.a)(p,2),v=E[0],O=E[1],h=Object(n.useState)("aa24f332-28e2-435e-ae9b-a1b164e47ada"),j=Object(o.a)(h,2),S=j[0],k=j[1];function y(e){var t=parseFloat(e);return!isNaN(t)}Object(n.useEffect)((function(){m.onmessage=function(e){var t=JSON.parse(String(e.data));document.title="Tracking ".concat(t.length," assets"),f(t)}}),[]);var w=g.find((function(e){return e.id===S}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{id:"id",label:"id",type:"string",required:!0,value:v.id,onChange:function(e){O(Object(i.a)({},v,{id:e.target.value}))}}),r.a.createElement(u.a,{id:"lat",label:"lat",type:"number",required:!0,value:v.lat,onChange:function(e){O(Object(i.a)({},v,{lat:e.target.value}))}}),r.a.createElement(u.a,{id:"lng",label:"lng",type:"number",required:!0,value:v.lng,onChange:function(e){O(Object(i.a)({},v,{lng:e.target.value}))}}),r.a.createElement(d.a,{color:"primary",onClick:function(){console.log(JSON.stringify(v)),""!==v.id&&y(v.lat)&&y(v.lng)&&(console.log("Sending asset to server"),m.readyState===m.OPEN)&&m.send(JSON.stringify(v))},style:{borderRadius:25,backgroundColor:"#21b6ae",padding:"8px 16px",fontSize:"12px"}},"Add Asset"),r.a.createElement(s.b,Object.assign({},a,{width:"70vw",height:"95vh",mapStyle:"mapbox://styles/mapbox/streets-v9",onViewportChange:function(e){return l(e)},mapboxApiAccessToken:"pk.eyJ1IjoibWNhd3RlIiwiYSI6ImNrZzM0am5tZjA3N2IycWxuc2Iyc25mb3oifQ.OBCOBXj9W2BEcsJurgRCVw"}),g.map((function(e){return r.a.createElement(s.a,{latitude:parseFloat(e.lat),longitude:parseFloat(e.lng),offsetLeft:0,offsetTop:0},r.a.createElement(d.a,{color:"primary",size:"small"},r.a.createElement("span",{role:"img","aria-label":"marker",onMouseEnter:function(){return k(e.id)},onMouseLeave:function(){return k("aa24f332-28e2-435e-ae9b-a1b164e47ada")}},"\ud83d\udccd"),e.id))})),"aa24f332-28e2-435e-ae9b-a1b164e47ada"!==S&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Asset checked in at ",w.datetime),r.a.createElement("div",null,"Distance traveled since last check-in: ",w.distance," km"))))};a(67);var g=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Real time asset tracking with WebSockets. Must connnect to ws://127.0.0.1:8000"),r.a.createElement(b,null))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.b15d1dcb.chunk.js.map